<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Using Grunt with a front-end project for the first time</title>
  <meta name="description" content="This is beginner's guide to setting up a project using the popular task runner and a simple directory setup">

  <link rel="stylesheet" href="/css/style.css">
  <link rel="canonical" href="http://www.abbasarezoo.com/thoughts/2016/05/02/my-grunt-setup.html">
  <link rel="alternate" type="application/rss+xml" title="Abbas Arezoo - Designer/Developer" href="http://www.abbasarezoo.com/feed.xml" />
</head>


  <body>

    <div class="pg-header--outer">
	<header class="pg-header">
	    <a class="logo" href="/">
	    	<i>
				<svg viewBox="0 0 1024 1024">
					<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/images/vectors.svg#icon--aa"></use>
				</svg>
			</i>
	    </a>
		<a class="toggle--main-nav" href="#">
			<span class="burger"></span>
			<span class="burger"></span>
			<span class="burger"></span>
		</a>
	</header>
</div>

    <nav class="main-nav">
	<ul class="main-nav--list">
		<li>
			<a href="/">Blog</a>
		</li>
		
	    
	    <li>
	        <a href="/about/">About</a>
	    </li>
	    
	    
	    
	    
	    
	    
	    
	    <li>
	        <a href="/work/">Work</a>
	    </li>
	    
	    
	</ul>
</nav>

      <main class="content">
        <div class="post">
  <header class="post-header">
	  	 <p class="post-meta">02.05.16</p>
	  	<div class="post-header--content">
	    	<h1 class="post-title">Using Grunt with a front-end project for the first time</h1>
	    	<h2 class="post-desc">This is beginner's guide to setting up a project using the popular task runner and a simple directory setup</h2>
		</div>
		<span>&darr;</span>
	</header>
  <article class="post-content">
    <h2 id="before-we-start">Before we start</h2>

<p>For this guide you’ll need a code editor and a command line application. For the purposes of this article I’ll be using Terminal (Mac).</p>

<p>Having a working knowledge of front-end development will help. It is also assumed you are familiar with Git and have used Github before.</p>

<h2 id="what-is-grunt">What is Grunt?</h2>

<p>Grunt is a ‘task runner’ which has thousands of plugins that can be used to automate almost any task. I use Grunt mainly for code compilation and image compression.</p>

<p>There are other task runners available that may serve your needs better but I won’t be getting into the pro’s and con’s of the alternatives in this guide. The fact is using any task runner will increase the speed of your development dramatically.</p>

<p>Not all projects are the same, so not all Grunt setups are be the same either. This boilerplate lays the foundations to create your own setup on a project-by-project basis.</p>

<h3 id="setting-up">Setting up</h3>

<p>If you’ve never used Grunt before you will need to:</p>

<ul>
  <li>Install <a href="https://nodejs.org/en/">Node.js</a></li>
  <li>Install <a href="http://gruntjs.com/getting-started">Grunt’s command line interface</a></li>
</ul>

<p>Grunt is a command line tool that uses a only small amount of commands. If you’re unfamiliar using the command line I reckon Grunt is a nice introduction for beginners.</p>

<p>Once you’re all setup we can fork the boilerplate from our Github repo and start automating.</p>

<h2 id="the-boilerplate">The boilerplate</h2>

<h3 id="file-structure">File structure</h3>

<p>Below is an example of what my boilerplate file structure looks like. There is no magical methodology behind it. The key idea is that there should be no un-compiled files inside our build directory <code class="highlighter-rouge">/www</code>.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>my_project_name
│   Gruntfile.js
│   package.json    
│   README.md
└───_css-src
    │   style.scss
    ├───modules
    │   │   _defaults.scss
    │   │   _fonts.scss
    ├───plugins
    │   │   _normalize.scss
    ├───ui
    │   │   _breakpoints.scss
    │   │   _general.scss
    │   │   _ui.scss
    │   │   _variables.scss
└───_html-src
└───_img-src
└───_js-src
└───www
</code></pre>
</div>
<p>If you’re going to use your own structure and naming conventions, then you will need to edit the Gruntfile accordingly.</p>

<h3 id="getting-some-plugins">Getting some plugins</h3>

<p>All of the plugins that Grunt will use are stored in the <code class="highlighter-rouge">/node_modules</code> directory.</p>

<p>You may have noticed there is no directory in the repo you forked. On an ongoing project a <code class="highlighter-rouge">/node_modules</code> will include thousands of files, which you can store remotely if that’s how you like to work. But it’s not detrimental to the project if you don’t do this.</p>

<p>We can run a single command in Terminal <code class="highlighter-rouge">npm-install</code> which downloads all of the plugins we need to our local environment. Be sure to add <code class="highlighter-rouge">node_modules</code> to .gitignore to make sure you don’t push to your remote repo.</p>

<p>Once we have the plugins we’re ready to look at our Gruntfile.</p>

<h3 id="configuring-the-gruntfile">Configuring the Gruntfile</h3>

<p>Each Grunt project has a Gruntfile. This is a configuration file where our tasks are setup. The file should and will always be named <code class="highlighter-rouge">Gruntfile.js</code> otherwise Grunt will error when your try to run a task.</p>

<p>Open up the file and take a look at the basic setup. In our setup we configure each task at the top, then load the plugins and register each task at the bottom.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">grunt</span><span class="p">)</span> <span class="p">{</span>

<span class="c1">// TASK CONFIGURATION</span>

<span class="nx">grunt</span><span class="p">.</span><span class="nx">initConfig</span><span class="p">({</span>
  <span class="na">pkg</span><span class="p">:</span> <span class="nx">grunt</span><span class="p">.</span><span class="nx">file</span><span class="p">.</span><span class="nx">readJSON</span><span class="p">(</span><span class="s1">'package.son'</span><span class="p">),</span>

    <span class="na">sass</span><span class="p">:</span> <span class="p">{</span>

      <span class="na">options</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">sourceMap</span><span class="p">:</span> <span class="kc">false</span>
      <span class="p">},</span>

      <span class="na">dist</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">files</span><span class="p">:</span> <span class="p">{</span>
          <span class="s1">'_css-src/styles/style.css'</span><span class="p">:</span> <span class="s1">'_css-src/sass/style.scss'</span>
        <span class="p">}</span>
      <span class="p">}</span>

    <span class="p">},</span>

<span class="p">});</span>

<span class="c1">// LOAD EACH PLUGIN</span>

<span class="nx">grunt</span><span class="p">.</span><span class="nx">loadNpmTasks</span><span class="p">(</span><span class="s1">'grunt-sass'</span><span class="p">);</span>

<span class="c1">// REGISTER EACH TASK</span>

<span class="nx">grunt</span><span class="p">.</span><span class="nx">registerTask</span><span class="p">(</span><span class="s1">'default'</span><span class="p">);</span>

<span class="p">};</span>
</code></pre>
</div>

<h4 id="exploring-and-editing-the-gruntfile">Exploring and editing the Gruntfile</h4>

<p>All the tasks are setup to run out of the box, albeit for some slight tweaking to the file itself such as changing file directories.</p>

<p>If you’re unfamiliar with Javascript you may be overawed by the code inside the Gruntfile. However, because of the simplistic nature of how Grunt tasks are configured, a newbie should be able to navigate and edit the file without too much trouble.</p>

<h4 id="interpreting-a-task">Interpreting a task</h4>

<p>Most tasks share similar characteristics with slight variations depending on how the code was written by the developer who built the plugin.</p>

<p>Each task tends to have it’s own Github repo where you can explore how the task works and is setup - there are some links below to the repo of each task included in this pack. I would recommending taking a look at the README of each plugin to get a feel for each one should be used.</p>

<p>Familiarising yourself with the structure of tasks, running tasks, editing tasks, breaking tasks and finding out how you broke them will serve you well in your future task automation.</p>

<h5 id="heres-an-image-compression-task">Here’s an image compression task:</h5>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">imagemin</span><span class="err">:</span> <span class="p">{</span>
    <span class="nl">optimise</span><span class="p">:</span> <span class="p">{</span>
        <span class="nl">files</span><span class="p">:</span> <span class="p">[{</span>
            <span class="na">expand</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
            <span class="na">cwd</span><span class="p">:</span> <span class="s1">'_img-src'</span><span class="p">,</span>
            <span class="na">src</span><span class="p">:</span> <span class="p">[</span><span class="s1">'*.{png,jpg,gif,svg}'</span><span class="p">],</span>
            <span class="na">dest</span><span class="p">:</span> <span class="s1">'www/images'</span>
        <span class="p">}]</span>
     <span class="p">}</span>
<span class="p">},</span>
</code></pre>
</div>
<ul>
  <li>This task as one target: <code class="highlighter-rouge">optimise</code></li>
  <li>This looks through the current working directory (<code class="highlighter-rouge">cwd</code>), where our uncompressed images are saved.</li>
  <li>It then looks for source files (<code class="highlighter-rouge">src</code>) to optimise. Note in this example we’re using a wildcard (<code class="highlighter-rouge">*</code>) to tell the plugin to target all files in our current working directory with the file extensions of .png, .jpg, .gif and .svg</li>
  <li>It then makes new versions of all the optimised images in the <code class="highlighter-rouge">www/images</code> directory</li>
  <li>If you’ve changed your directory setup you will need to change the location of the <code class="highlighter-rouge">cwd</code> and <code class="highlighter-rouge">dest</code> accordingly</li>
</ul>

<h5 id="another-task-example-with-a-different-structure-this-time-compiling-sass">Another task example with a different structure, this time compiling Sass:</h5>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">sass</span><span class="err">:</span> <span class="p">{</span>
    <span class="nl">options</span><span class="p">:</span> <span class="p">{</span>
        <span class="nl">sourceMap</span><span class="p">:</span> <span class="kc">false</span>
    <span class="p">},</span>
    <span class="nx">dist</span><span class="err">:</span> <span class="p">{</span>
        <span class="nl">files</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">'_css-src/styles/style.css'</span><span class="err">:</span> <span class="s1">'_css-src/sass/style.scss'</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">},</span>
</code></pre>
</div>
<ul>
  <li>This task is setup a little differently, with two targets <code class="highlighter-rouge">options</code> and <code class="highlighter-rouge">dist</code></li>
  <li>The <code class="highlighter-rouge">options</code> target creates a source map for the compiled CSS file (really handy). This option is currently set to <code class="highlighter-rouge">false</code> however, which means no source map will be generated</li>
  <li>The second target of this task dictates where the compiled CSS will be generated to and from directory it is created from</li>
  <li>The first part shows which directory the final CSS goes. The second part shows the directory where the separate Sass files are located</li>
</ul>

<h3 id="tasks-included-with-this-boilerplate">Tasks included with this boilerplate</h3>

<h4 id="compile-css">Compile CSS</h4>

<p>Task name: <strong><a href="https://github.com/sindresorhus/grunt-sass">grunt-sass</a></strong></p>

<p>Command: <code class="highlighter-rouge">$ grunt css</code></p>

<ul>
  <li>Compiles Sass files inside the <strong>_css-src</strong> directory to CSS files</li>
  <li>Adds in vendor prefixes and minify CSS using posts</li>
  <li>Compiles the resulting CSS files to a specific directory</li>
</ul>

<h4 id="compile-html">Compile HTML</h4>

<p>Task name: <strong><a href="https://github.com/fatso83/grunt-codekit">grunt-codekit</a></strong></p>

<p>Command: <code class="highlighter-rouge">$ grunt html</code></p>

<ul>
  <li>Compiles multiple HTML files inside the <strong>_html-src</strong> directory into <strong>.kit</strong> files</li>
  <li>Converts <strong>.kit</strong> files to <strong>.html</strong> files and moves them to a specific directory</li>
</ul>

<h4 id="concatenate-javascript">Concatenate Javascript</h4>

<p>Task name: <strong><a href="https://github.com/gruntjs/grunt-contrib-uglify">grunt-contrib-uglify</a></strong></p>

<p>Command: <code class="highlighter-rouge">$ grunt js</code></p>

<ul>
  <li>Concatenates multiple Javascript files inside the <strong>_js-src</strong> directory into a single minified file</li>
  <li>Moves the resulting JS file to a specific directory</li>
</ul>

<h4 id="optimise-images">Optimise images</h4>

<p>Task name: <strong><a href="https://github.com/gruntjs/grunt-contrib-imagemin">grunt-contrib-imagemin</a></strong></p>

<p>Command <code class="highlighter-rouge">$ grunt img</code></p>

<ul>
  <li>Optimises all images inside the <strong>_img-src</strong> directory</li>
  <li>Moves the optimised images to a specific directory</li>
</ul>

<h2 id="files-hosted-on-github">Files hosted on Github</h2>

<h3 id="handy-links">Handy links</h3>

<ul>
  <li>Official Grunt website</li>
  <li>Node.js website</li>
  <li>Terminal for Mac</li>
  <li>Terminal for OSX</li>
  <li><a href="https://24ways.org/2013/grunt-is-not-weird-and-hard/">Chris Coyier’s article on Grunt is excellent</a>. This is where I started, so I would highly recommend reading this first.</li>
</ul>

  </article>
</div>

      </main>

    <footer class="pg-footer">

</footer>
<script src="//localhost:35729/livereload.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="/scripts/main.min.js"></script>


  </body>

</html>
