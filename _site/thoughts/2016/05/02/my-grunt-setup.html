<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Using Grunt with a front-end project for the first time</title>
  <meta name="description" content="This is beginner's guide to setting up a project using the popular task runner and a simple directory setup">

  <link rel="stylesheet" href="/css/style.css">
  <link rel="canonical" href="http://www.abbasarezoo.com/thoughts/2016/05/02/my-grunt-setup.html">
  <link rel="alternate" type="application/rss+xml" title="Abbas Arezoo - Designer/Developer" href="http://www.abbasarezoo.com/feed.xml" />
</head>


  <body>

    <div class="pg-header--outer">
	<header class="pg-header">
	    <a class="logo" href="/">
	    	<i>
				<svg viewBox="0 0 1024 1024">
					<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/images/vectors.svg#icon--aa"></use>
				</svg>
			</i>
	    </a>
		<a class="toggle--main-nav" href="#">
			<span class="burger"></span>
			<span class="burger"></span>
			<span class="burger"></span>
		</a>
	</header>
</div>

    <nav class="main-nav">
	<ul class="main-nav--list">
		<li>
			<a href="/">Blog</a>
		</li>
		
	    
	    <li>
	        <a href="/about/">About</a>
	    </li>
	    
	    
	    
	    
	    
	    
	    
	    <li>
	        <a href="/work/">Work</a>
	    </li>
	    
	    
	</ul>
</nav>

      <main class="content">
        <div class="post">
  <header class="post-header">
	  	 <p class="post-meta">02.05.16</p>
	  	<div class="post-header--content">
	    	<h1 class="post-title">Using Grunt with a front-end project for the first time</h1>
	    	<h2 class="post-desc">This is beginner's guide to setting up a project using the popular task runner and a simple directory setup</h2>
		</div>
		<span>&darr;</span>
	</header>
  <article class="post-content">
    <h2 id="before-we-start">Before we start</h2>

<p>For this guide you’ll need a code editor and a command line application. For the purposes of this guide I’ll be using Terminal (Mac).</p>

<p>Having a working knowledge of front-end development will help. It is also assumed you are familiar with Git and have used Github before.</p>

<p>Not all projects are the same, so not all Grunt setups are be the same either. This boilerplate lays the foundations to create your own setup on a project-by-project basis.</p>

<h2 id="what-is-grunt">What is Grunt?</h2>

<p>Grunt is a ‘task runner’ which has thousands of plugins that can be used to automate almost any task. Whilst there are other task runners available that may serve your needs better, I won’t be getting into the pro’s and con’s of the alternatives in this guide.</p>

<p>The fact is: using any task runner will dramatically increase the speed of your development.</p>

<h3 id="setting-up">Setting up</h3>

<p>If you’ve never used Grunt before you will need to:</p>

<ul>
  <li>Install <a href="https://nodejs.org/en/">Node.js</a></li>
  <li>Install <a href="http://gruntjs.com/getting-started">Grunt’s command line interface</a></li>
</ul>

<p>Grunt is a command line tool that uses a only small amount of commands. If you’re unfamiliar using the command line, getting to grips with Grunt is a nice introduction for beginners.</p>

<p>Once you’re all setup we can fork the boilerplate from our Github repo and start getting to know Grunt.</p>

<h2 id="the-boilerplate">The boilerplate</h2>

<h3 id="file-structure">File structure</h3>

<p>Below is an example of what my boilerplate file structure looks like. There is no magical methodology behind it. The idea is that there should be no uncompiled or uncompressed files inside our build directory: <em>www</em>.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>my_project_name
│   Gruntfile.js
│   package.json    
│   README.md
└───_css-src
    │   style.scss
    ├───modules
    │   │   _defaults.scss
    │   │   _fonts.scss
    ├───plugins
    │   │   _normalize.scss
    ├───ui
    │   │   _breakpoints.scss
    │   │   _general.scss
    │   │   _ui.scss
    │   │   _variables.scss
└───_html-src
└───_img-src
└───_js-src
└───www
</code></pre>
</div>
<p>You’re probably going to want to you use your own structure and naming conventions, so you will need to edit the Gruntfile accordingly… more on that later.</p>

<h3 id="getting-some-plugins">Getting some plugins</h3>

<p>All of the plugins that we’re going to use are stored in the <em>node_modules</em> directory.</p>

<p>You may have noticed there is no such directory in the repo you forked. In all Grunt projects a <em>node_modules</em> will include thousands of files, I don’t see the point in pushing these files to a remote repo.</p>

<p>You will also see a <em>package.json</em> file which contains the name of the project and a list of plugins we will be using. If you’re <em>package.json</em> file has a pre-populated list of plugins (like in this project) you can simply run the command <code class="highlighter-rouge">$ npm install</code> to download them to your local environment. Running this command creates the <em>node_modules</em> directory locally and the directories for each plugin within.</p>

<p>Note: any additional plugins you add to your project will update this file so you can leave this file alone from now on.</p>

<p>Once we have the plugins we’re ready to look at our Gruntfile.</p>

<h3 id="the-gruntfile">The Gruntfile</h3>

<p>Each Grunt project has a Gruntfile. This is a configuration file where our tasks are setup. The file should and will always be named <em>Gruntfile.js</em> otherwise Grunt will error when your try to run a task.</p>

<p>Open up the file and take a look at the basic setup. In our setup we configure each task at the top, then load the plugins and register each task at the bottom.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">grunt</span><span class="p">)</span> <span class="p">{</span>

<span class="c1">// TASK CONFIGURATION</span>

<span class="nx">grunt</span><span class="p">.</span><span class="nx">initConfig</span><span class="p">({</span>
  <span class="na">pkg</span><span class="p">:</span> <span class="nx">grunt</span><span class="p">.</span><span class="nx">file</span><span class="p">.</span><span class="nx">readJSON</span><span class="p">(</span><span class="s1">'package.son'</span><span class="p">),</span>

    <span class="na">sass</span><span class="p">:</span> <span class="p">{</span>

      <span class="na">options</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">sourceMap</span><span class="p">:</span> <span class="kc">false</span>
      <span class="p">},</span>

      <span class="na">dist</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">files</span><span class="p">:</span> <span class="p">{</span>
          <span class="s1">'_css-src/styles/style.css'</span><span class="p">:</span> <span class="s1">'_css-src/sass/style.scss'</span>
        <span class="p">}</span>
      <span class="p">}</span>

    <span class="p">},</span>

<span class="p">});</span>

<span class="c1">// LOAD EACH PLUGIN</span>

<span class="nx">grunt</span><span class="p">.</span><span class="nx">loadNpmTasks</span><span class="p">(</span><span class="s1">'grunt-sass'</span><span class="p">);</span>

<span class="c1">// REGISTER EACH TASK</span>

<span class="nx">grunt</span><span class="p">.</span><span class="nx">registerTask</span><span class="p">(</span><span class="s1">'default'</span><span class="p">);</span>

<span class="p">};</span>
</code></pre>
</div>

<h4 id="exploring-and-editing-the-gruntfile">Exploring and editing the Gruntfile</h4>

<p>All the tasks are setup to run out of the box, albeit for some slight tweaking to the file itself such as changing file directories.</p>

<p>If you’re unfamiliar with Javascript you may be overawed by the code inside the Gruntfile. However, because of the simplistic nature of how Grunt tasks are configured, a newbie should be able to navigate and edit the file without too much trouble.</p>

<h4 id="interpreting-a-task">Interpreting a task</h4>

<p>Most tasks share similar characteristics with slight variations depending on how the code was written by the developer who built the plugin.</p>

<p>Each task tends to have it’s own Github repo where you can explore how the task works and is setup - there are some links below to the repo of each task included in this pack. I would recommending taking a look at the <em>README.md</em> of each plugin to get a feel for each one should be used.</p>

<p>Familiarising yourself with the structure of tasks, running tasks, editing tasks, breaking tasks and finding out how you broke them will serve you well in your future task automation.</p>

<h5 id="heres-an-example-image-optimisation-task">Here’s an example image optimisation task:</h5>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">imagemin</span><span class="err">:</span> <span class="p">{</span>
    <span class="nl">optimise</span><span class="p">:</span> <span class="p">{</span>
        <span class="nl">files</span><span class="p">:</span> <span class="p">[{</span>
            <span class="na">expand</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
            <span class="na">cwd</span><span class="p">:</span> <span class="s1">'_img-src'</span><span class="p">,</span>
            <span class="na">src</span><span class="p">:</span> <span class="p">[</span><span class="s1">'*.{png,jpg,gif,svg}'</span><span class="p">],</span>
            <span class="na">dest</span><span class="p">:</span> <span class="s1">'www/images'</span>
        <span class="p">}]</span>
     <span class="p">}</span>
<span class="p">},</span>
</code></pre>
</div>
<ul>
  <li>This task as one target: <code class="highlighter-rouge">optimise</code></li>
  <li>This looks through the current working directory (<code class="highlighter-rouge">cwd</code>), where our uncompressed images are saved.</li>
  <li>It then looks for source files (<code class="highlighter-rouge">src</code>) to optimise. Note in this example we’re using a wildcard (<code class="highlighter-rouge">*</code>) to tell the plugin to target all files in our current working directory with the file extensions of <em>.png</em>, <em>.jpg</em>, <em>.gif</em> and <em>.svg</em>.</li>
  <li>It then makes new versions of all the optimised images in the <em>www/images</em> directory.</li>
  <li>If you’ve changed your directory setup you will need to change the location of the <code class="highlighter-rouge">cwd</code> and <code class="highlighter-rouge">dest</code> accordingly.</li>
</ul>

<h5 id="another-task-example-with-a-different-structure-this-time-compiling-sass">Another task example with a different structure, this time compiling Sass:</h5>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">sass</span><span class="err">:</span> <span class="p">{</span>
    <span class="nl">options</span><span class="p">:</span> <span class="p">{</span>
        <span class="nl">sourceMap</span><span class="p">:</span> <span class="kc">false</span>
    <span class="p">},</span>
    <span class="nx">dist</span><span class="err">:</span> <span class="p">{</span>
        <span class="nl">files</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">'_css-src/styles/style.css'</span><span class="err">:</span> <span class="s1">'_css-src/sass/style.scss'</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">},</span>
</code></pre>
</div>
<ul>
  <li>This task is setup a little differently, with two targets <code class="highlighter-rouge">options</code> and <code class="highlighter-rouge">dist</code>.</li>
  <li>The <code class="highlighter-rouge">options</code> target creates a source map for the compiled CSS file (really handy). This option is currently set to <code class="highlighter-rouge">false</code> however, which means no source map will be generated.</li>
  <li>The second target of this task dictates where the compiled CSS will be generated to and from directory it is created from.</li>
  <li>The first part shows which directory the final CSS goes. The second part shows the directory where the separate Sass files are located.</li>
</ul>

<h2 id="running-tasks">Running tasks</h2>

<p>Now you’ve got to know Grunt it’s time to head back to Terminal and start writing some commands.</p>

<h3 id="tasks-included-with-this-boilerplate">Tasks included with this boilerplate</h3>

<h4 id="compile-css">Compile CSS</h4>

<p>Task name: <em><a href="https://github.com/sindresorhus/grunt-sass">grunt-sass</a></em></p>

<p>Command: <code class="highlighter-rouge">$ grunt css</code></p>

<h5 id="how-this-task-works">How this task works</h5>

<ul>
  <li>Compiles Sass files inside the <em>_css-src</em> directory to CSS files</li>
  <li>Adds in vendor prefixes and minify CSS using posts</li>
  <li>Compiles the resulting CSS files to a specific directory</li>
</ul>

<h4 id="compile-html">Compile HTML</h4>

<p>Task name: <em><a href="https://github.com/fatso83/grunt-codekit">grunt-codekit</a></em></p>

<p>Command: <code class="highlighter-rouge">$ grunt html</code></p>

<h5 id="how-it-works">How it works</h5>

<ul>
  <li>Compiles multiple HTML files inside the <em>_html-src</em> directory into <em>.kit</em> files</li>
  <li>Converts <em>.kit</em> files to <em>.html</em> files and moves them to a specific directory</li>
</ul>

<h4 id="concatenate-javascript">Concatenate Javascript</h4>

<p>Task name: <em><a href="https://github.com/gruntjs/grunt-contrib-uglify">grunt-contrib-uglify</a></em></p>

<p>Command: <code class="highlighter-rouge">$ grunt js</code></p>

<h5 id="how-it-works-1">How it works</h5>

<ul>
  <li>Concatenates multiple Javascript files inside the <em>_js-src</em> directory into a single minified file</li>
  <li>Moves the resulting JS file to a specific directory</li>
</ul>

<h4 id="optimise-images">Optimise images</h4>

<p>Task name: <em><a href="https://github.com/gruntjs/grunt-contrib-imagemin">grunt-contrib-imagemin</a></em></p>

<p>Command <code class="highlighter-rouge">$ grunt img</code></p>

<h5 id="how-it-works-2">How it works</h5>

<ul>
  <li>Optimises all images inside the <em>_img-src</em> directory</li>
  <li>Moves the optimised images to a specific directory</li>
</ul>

<p>Now you have the ability to run individual tasks your development time will be noticeably quicker. But we can take our newly found knowledge of Grunt a step further.</p>

<h2 id="going-to-the-next-level">Going to the next level</h2>

<p>Using Terminal to run individual tasks is a great way to learn Grunt, but this isn’t an efficient way of working on a live project. We can take our automation to the next level and we can do this using the <em>grunt-watch</em> task.</p>

<p>This task watches a directory and runs specified sub-tasks when additions and changes are made to files within that directory.</p>

<p>The great thing about about <em>grunt-watch</em> is you run the command once and leave it to work its magic in the background while you go about your work.</p>

<h5 id="heres-an-example-grunt-watch-task">Here’s an example grunt-watch task:</h5>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">watch</span><span class="err">:</span> <span class="p">{</span>
    <span class="nl">css</span><span class="p">:</span> <span class="p">{</span>
        <span class="nl">files</span><span class="p">:</span> <span class="p">[</span><span class="s1">'_css-src/**/*.scss'</span><span class="p">],</span>
        <span class="nx">tasks</span><span class="err">:</span> <span class="p">[</span><span class="s1">'css'</span><span class="p">],</span>
            <span class="nx">options</span><span class="err">:</span> <span class="p">{</span>
                <span class="nl">spawn</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
                <span class="nx">livereload</span><span class="err">:</span><span class="mi">35729</span><span class="p">,</span>
                <span class="nx">event</span><span class="err">:</span> <span class="p">[</span><span class="s1">'added'</span><span class="p">,</span> <span class="s1">'changed'</span><span class="p">]</span>
            <span class="p">},</span>
    <span class="p">},</span>
<span class="p">},</span>
</code></pre>
</div>

<ul>
  <li>In this example there is a sub-task called <code class="highlighter-rouge">css</code></li>
  <li>This sub-task watches the <em>_css-src</em> directory and all files within with the file extension <em>.scss</em></li>
  <li>If you refer to the area in the Gruntfile where tasks are registered you’ll see</li>
</ul>

<p>You will notice in our Gruntfile a number of sub-tasks within our <em>watch</em> task. Take some time to familiarise yourself with how sub-tasks are written and how the link with other tasks in the same Gruntfile.</p>

<p>To run the <em>watch</em> task simply run <code class="highlighter-rouge">$ grunt watch</code> and you’re good to go.</p>

<h2 id="files-hosted-on-github">Files hosted on Github</h2>

<h3 id="handy-links">Handy links</h3>

<ul>
  <li>Official Grunt website</li>
  <li>Node.js website</li>
  <li>Terminal for Mac</li>
  <li>Terminal for OSX</li>
  <li><a href="https://24ways.org/2013/grunt-is-not-weird-and-hard/">Chris Coyier’s article on Grunt is excellent</a>. This is where I started, so I would highly recommend reading this first.</li>
</ul>

  </article>
</div>

      </main>

    <footer class="pg-footer">

</footer>
<script src="//localhost:35729/livereload.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="/scripts/main.min.js"></script>


  </body>

</html>
